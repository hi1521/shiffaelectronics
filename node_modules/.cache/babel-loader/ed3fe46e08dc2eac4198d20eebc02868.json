{"ast":null,"code":"import _regeneratorRuntime from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{MDBDataTable,MDBBtn,MDBInput,MDBRow,MDBContainer,MDBCol}from'mdbreact';import\"./all_product.css\";import axios from\"axios\";var AllProducts=/*#__PURE__*/function(_Component){_inherits(AllProducts,_Component);var _super=_createSuper(AllProducts);function AllProducts(){var _this;_classCallCheck(this,AllProducts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.quantityComponent=function(index){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var rows=_this.state.data.rows;var quantity=rows.length>0?rows[index].Product_Quantity:parseInt(value);return/*#__PURE__*/React.createElement(\"div\",{className:\"md-form\",style:{margin:0}},/*#__PURE__*/React.createElement(\"input\",{// style={{width:\"150px\"}}\ntype:\"number\",id:index+1,onChange:function onChange(event){return _this.onQuantityChange(index,event.target.value);},min:0,value:quantity,className:\"form-control\"}));};_this.onQuantityChange=function(index,value){var quantity=0;if(value!==\"\")quantity=parseInt(value);var _this$state=_this.state,data=_this$state.data,grossProfit=_this$state.grossProfit;grossProfit-=data.rows[index].Profit;data.rows[index].Product_Quantity=quantity;var _data$rows$index=data.rows[index],Product_Retail_Price=_data$rows$index.Product_Retail_Price,Product_PurchasePrice=_data$rows$index.Product_PurchasePrice;data.rows[index].Profit=(Product_Retail_Price-Product_PurchasePrice)*quantity;grossProfit+=data.rows[index].Profit;_this.setState({data,grossProfit});};_this.state={data:{columns:[{label:'Name',field:'Product_Name',sort:'asc',width:150},{label:'C.Name',field:'Category_Name',sort:'asc',width:270},{label:'P.Brand',field:'Product_Brand',sort:'asc',width:200},{label:'P.Code',field:'Product_Code',sort:'asc',width:100},{label:'Qty',field:'qty',sort:'asc',width:150},{label:'R.Price',field:'Product_Retail_Price',sort:'asc',width:350},{label:'Profit',field:'Profit',sort:'asc',width:350}],rows:[]},grossProfit:0};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state2,data,grossProfit,rows;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state2=_this.state,data=_this$state2.data,grossProfit=_this$state2.grossProfit;rows=data.rows;_context.next=4;return axios.post(\"http://localhost/spare_parts/allproducts.php\").then(function(response){response.data.map(function(product,index){var Product_Retail_Price=product.Product_Retail_Price,Product_PurchasePrice=product.Product_PurchasePrice,Product_Quantity=product.Product_Quantity;product[\"qty\"]=_this.quantityComponent(index,product.Product_Quantity);product[\"Profit\"]=(Product_Retail_Price-Product_PurchasePrice)*Product_Quantity;grossProfit+=product[\"Profit\"];rows=[].concat(_toConsumableArray(rows),[product]);});});case 4:data.rows=rows;_this.setState({data,grossProfit});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.onSave=function(){var products=_this.state.data.rows.map(function(value){delete value.qty;return value;});var data={items:products};console.log(data);axios.post(\"http://localhost/spare_parts/update_product.php\",data).then(function(value){return console.log(value);});};return _this;}_createClass(AllProducts,[{key:\"render\",value:function render(){var _this2=this;var grossProfit=this.state.grossProfit;var _this$state$data=this.state.data,columns=_this$state$data.columns,rows=_this$state$data.rows;if(rows.length>0)rows.map(function(value,index){rows[index].qty=_this2.quantityComponent(index);// rows[index].Product_PurchasePrice;\n// rows[index].Product_Retail_Price;\n});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(MDBDataTable// className=\"form-header blue-gradient rounded\"\n,{theadColor:\"blue-gradient\",striped:true,barReverse:true,theadTextWhite:true,hover:true,noBottomColumns:true,data:{columns,rows}}),/*#__PURE__*/React.createElement(MDBContainer,{style:{paddingTop:50}},/*#__PURE__*/React.createElement(MDBRow,{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(MDBCol,{sm:8},/*#__PURE__*/React.createElement(MDBBtn,{color:\"success\",onClick:this.onSave},\"Save\")),/*#__PURE__*/React.createElement(MDBCol,{sm:4},/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:\"20px\",fontWeight:\"bold\"}},\"Gross Profit: \"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"inline-block\"}},/*#__PURE__*/React.createElement(\"h4\",{style:{color:\"#00C851\"}},\"Rs.\".concat(grossProfit)))))));}}]);return AllProducts;}(Component);export default AllProducts;","map":{"version":3,"sources":["/home/hishsmtariq/GitProj/spare_part/src/spare_parts_components/all_product.jsx"],"names":["React","Component","MDBDataTable","MDBBtn","MDBInput","MDBRow","MDBContainer","MDBCol","axios","AllProducts","quantityComponent","index","value","rows","state","data","quantity","length","Product_Quantity","parseInt","margin","event","onQuantityChange","target","grossProfit","Profit","Product_Retail_Price","Product_PurchasePrice","setState","columns","label","field","sort","width","componentDidMount","post","then","response","map","product","onSave","products","qty","items","console","log","paddingTop","fontSize","fontWeight","display","color"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport {MDBDataTable, MDBBtn, MDBInput, MDBRow, MDBContainer, MDBCol} from 'mdbreact';\nimport \"./all_product.css\"\nimport axios from \"axios\";\n\nclass AllProducts extends Component {\n\n\n\n    quantityComponent = (index, value = null) =>{\n        const {rows} = this.state.data;\n        const quantity = rows.length > 0 ? rows[index].Product_Quantity : parseInt(value);\n        return (\n            <div className=\"md-form\" style={{margin: 0}}>\n                <input\n                    // style={{width:\"150px\"}}\n                    type=\"number\"\n                    id={index + 1}\n                    onChange={event => this.onQuantityChange(index, event.target.value)}\n                    min={0}\n                    value={quantity}\n                    className=\"form-control\"\n                />\n            </div>\n        );\n    }\n\n    onQuantityChange = (index, value) => {\n        let quantity = 0;\n        if (value !== \"\") quantity = parseInt(value);\n        let { data, grossProfit } = this.state;\n        grossProfit -= data.rows[index].Profit;\n        data.rows[index].Product_Quantity = quantity;\n        const {\n            Product_Retail_Price,\n            Product_PurchasePrice,\n        } = data.rows[index];\n        data.rows[index].Profit = (Product_Retail_Price - Product_PurchasePrice) * quantity;\n        grossProfit += data.rows[index].Profit;\n        this.setState({data, grossProfit})\n    }\n\n    state = {\n        data: {\n            columns: [\n                {\n                    label: 'Name',\n                    field: 'Product_Name',\n                    sort: 'asc',\n                    width: 150\n                },\n                {\n                    label: 'C.Name',\n                    field: 'Category_Name',\n                    sort: 'asc',\n                    width: 270\n                },\n                {\n                    label: 'P.Brand',\n                    field: 'Product_Brand',\n                    sort: 'asc',\n                    width: 200\n                },\n                {\n                    label: 'P.Code',\n                    field: 'Product_Code',\n                    sort: 'asc',\n                    width: 100\n                },\n                {\n                    label: 'Qty',\n                    field: 'qty',\n                    sort: 'asc',\n                    width: 150\n                },\n                {\n                    label: 'R.Price',\n                    field: 'Product_Retail_Price',\n                    sort: 'asc',\n                    width: 350\n                },\n                {\n                    label: 'Profit',\n                    field: 'Profit',\n                    sort: 'asc',\n                    width: 350\n                },\n            ],\n            rows: []\n        },\n        grossProfit: 0\n    };\n\n    componentDidMount = async () => {\n        let {data, grossProfit} = this.state;\n        let rows = data.rows;\n        await axios\n            .post(\"http://localhost/spare_parts/allproducts.php\")\n            .then((response) => {\n                    response.data.map((product, index) => {\n                        const {\n                            Product_Retail_Price,\n                            Product_PurchasePrice,\n                            Product_Quantity\n                        } = product;\n                        product[\"qty\"] = this.quantityComponent(index, product.Product_Quantity);\n                        product[\"Profit\"] = (Product_Retail_Price - Product_PurchasePrice) * Product_Quantity;\n                        grossProfit += product[\"Profit\"];\n                        rows = [...rows, product];\n                    });\n                }\n            );\n        data.rows = rows;\n        this.setState({ data, grossProfit });\n    };\n\n    onSave = () =>{\n        const products = this.state.data.rows.map(value => {\n            delete value.qty;\n            return value;\n        })\n\n        const data = {\n            items: products,\n        }\n\n        console.log(data);\n        axios.post(\"http://localhost/spare_parts/update_product.php\", data)\n            .then(value => console.log(value));\n    }\n\n    render() {\n        const { grossProfit } = this.state;\n        let { columns, rows } = this.state.data;\n        if (rows.length > 0)\n            rows.map((value, index) => {\n                rows[index].qty = this.quantityComponent(index);\n                // rows[index].Product_PurchasePrice;\n                // rows[index].Product_Retail_Price;\n            })\n        return (\n                <div>\n                    <MDBDataTable\n                        // className=\"form-header blue-gradient rounded\"\n                        theadColor={\"blue-gradient\"}\n                        striped\n                        barReverse={true}\n                        theadTextWhite={true}\n                        hover\n                        noBottomColumns={true}\n                        data={{columns,rows}}\n                    />\n                    <MDBContainer style={{paddingTop: 50}}>\n                        <MDBRow className=\"d-flex justify-content-center\">\n                            <MDBCol sm={8}>\n                                <MDBBtn color={\"success\"} onClick={this.onSave}>Save</MDBBtn>\n                            </MDBCol>\n                            <MDBCol sm={4}>\n                                <span style={{fontSize:\"20px\", fontWeight:\"bold\"}}>Gross Profit: </span>\n                                <div style={{display:\"inline-block\"}}>\n                                    <h4 style={{color:\"#00C851\"}}>{ `Rs.${grossProfit}` }</h4>\n                                </div>\n                            </MDBCol>\n                        </MDBRow>\n                    </MDBContainer>\n                </div>\n        );\n    }\n}\n\nexport default AllProducts;"]},"metadata":{},"sourceType":"module"}