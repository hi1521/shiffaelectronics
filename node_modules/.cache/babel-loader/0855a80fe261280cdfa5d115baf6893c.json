{"ast":null,"code":"import _toConsumableArray from \"/home/hishsmtariq/ReactJsProjects/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/home/hishsmtariq/ReactJsProjects/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport { useEffect, useMemo, useState, useRef, useCallback } from 'react';\nimport highlightReducer from './highlightReducer';\nimport getDisplayValue from './lib/getDisplayValue';\nimport flattenOptions from './lib/flattenOptions';\nimport groupOptions from './lib/groupOptions';\nimport getNewValue from './lib/getNewValue';\nimport getOption from './lib/getOption';\nimport doSearch from './search';\nexport default function useSelect(_ref) {\n  var _ref$value = _ref.value,\n      defaultValue = _ref$value === void 0 ? null : _ref$value,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$multiple = _ref.multiple,\n      multiple = _ref$multiple === void 0 ? false : _ref$multiple,\n      _ref$search = _ref.search,\n      canSearch = _ref$search === void 0 ? false : _ref$search,\n      _ref$fuse = _ref.fuse,\n      fuse = _ref$fuse === void 0 ? false : _ref$fuse,\n      defaultOptions = _ref.options,\n      _ref$onChange = _ref.onChange,\n      onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange,\n      _ref$getOptions = _ref.getOptions,\n      getOptions = _ref$getOptions === void 0 ? null : _ref$getOptions,\n      _ref$allowEmpty = _ref.allowEmpty,\n      allowEmpty = _ref$allowEmpty === void 0 ? true : _ref$allowEmpty,\n      _ref$closeOnSelect = _ref.closeOnSelect,\n      closeOnSelect = _ref$closeOnSelect === void 0 ? true : _ref$closeOnSelect,\n      _ref$closable = _ref.closable,\n      closable = _ref$closable === void 0 ? true : _ref$closable;\n  var ref = useRef(null);\n  var flatDefaultOptions = useMemo(function () {\n    return flattenOptions(defaultOptions);\n  }, [defaultOptions]);\n\n  var _useState = useState({\n    flat: [],\n    addedOptions: [],\n    value: defaultValue,\n    search: '',\n    focus: false,\n    searching: false,\n    highlighted: -1,\n    changed: false\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var flat = state.flat,\n      addedOptions = state.addedOptions,\n      value = state.value,\n      search = state.search,\n      focus = state.focus,\n      searching = state.searching,\n      highlighted = state.highlighted;\n  var option = useMemo(function () {\n    var newOption = getOption(value, [].concat(_toConsumableArray(flatDefaultOptions), _toConsumableArray(addedOptions)));\n\n    if (!newOption && !allowEmpty && !multiple) {\n      var _flatDefaultOptions = _slicedToArray(flatDefaultOptions, 1);\n\n      newOption = _flatDefaultOptions[0];\n    }\n\n    return newOption;\n  }, [value, flatDefaultOptions, addedOptions, allowEmpty, multiple]);\n  var options = useMemo(function () {\n    return groupOptions(flat);\n  }, [flat]);\n  var displayValue = useMemo(function () {\n    return getDisplayValue(option);\n  }, [option]);\n  var onBlur = useCallback(function () {\n    setState(function (oldState) {\n      return _objectSpread(_objectSpread({}, oldState), {}, {\n        focus: false,\n        search: '',\n        flat: flatDefaultOptions,\n        highlighted: -1\n      });\n    });\n\n    if (ref.current) {\n      ref.current.blur();\n    }\n  }, [flatDefaultOptions, ref]);\n\n  var setFocus = function setFocus(newFocus) {\n    return setState(function (oldState) {\n      return _objectSpread(_objectSpread({}, oldState), {}, {\n        focus: newFocus\n      });\n    });\n  };\n\n  var onClick = function onClick() {\n    return setFocus(!focus);\n  };\n\n  var onFocus = function onFocus() {\n    return setFocus(true);\n  };\n\n  var onSelect = useCallback(function (id) {\n    setState(function (prevState) {\n      var prevFlat = prevState.flat,\n          prevHighlighted = prevState.highlighted; // eslint-disable-next-line no-underscore-dangle,eqeqeq\n\n      var item = id ? prevFlat.find(function (i) {\n        return i.value == id;\n      }) : prevFlat[prevHighlighted];\n\n      if (!item) {\n        return prevState;\n      }\n\n      var values = getNewValue(item.value, prevState.value, multiple);\n      var newOptions = getOption(values, prevFlat);\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        addedOptions: multiple ? newOptions : [newOptions],\n        value: values,\n        changed: [values, newOptions]\n      });\n    });\n  }, [multiple]);\n  var onMouseDown = useCallback(function (e) {\n    if (!closeOnSelect) {\n      e.preventDefault();\n    }\n\n    onSelect(e.currentTarget.value);\n  }, [onSelect, closeOnSelect]);\n  var onKeyDown = useCallback(function (e) {\n    var key = e.key;\n\n    if (key === 'ArrowDown' || key === 'ArrowUp') {\n      e.preventDefault();\n      setState(function (oldState) {\n        return _objectSpread(_objectSpread({}, oldState), {}, {\n          highlighted: highlightReducer(oldState.highlighted, {\n            key,\n            options: oldState.flat\n          })\n        });\n      });\n    }\n  }, []);\n  var onKeyPress = useCallback(function (_ref2) {\n    var key = _ref2.key;\n\n    if (key === 'Enter') {\n      onSelect();\n\n      if (closable && closeOnSelect) {\n        onBlur();\n      }\n    }\n  }, [onSelect, closeOnSelect, onBlur, closable]);\n  var onKeyUp = useCallback(function (_ref3) {\n    var key = _ref3.key;\n\n    if (key === 'Escape') {\n      onBlur();\n    }\n  }, [onBlur]);\n\n  var onSearch = function onSearch(_ref4) {\n    var target = _ref4.target;\n    var inputVal = target.value;\n    var newState = {\n      search: inputVal\n    };\n    var searchableOption = flatDefaultOptions;\n\n    if (getOptions && inputVal.length) {\n      newState.searching = true;\n      searchableOption = getOptions(inputVal);\n    }\n\n    setState(function (oldState) {\n      return _objectSpread(_objectSpread({}, oldState), newState);\n    });\n    Promise.resolve(searchableOption).then(function (foundOptions) {\n      var newOptions = foundOptions;\n\n      if (inputVal.length) {\n        newOptions = doSearch(inputVal, foundOptions, fuse);\n      }\n\n      setState(function (oldState) {\n        return _objectSpread(_objectSpread({}, oldState), {}, {\n          flat: newOptions === false ? foundOptions : newOptions,\n          searching: false\n        });\n      });\n    }).catch(function () {\n      return setState(function (oldState) {\n        return _objectSpread(_objectSpread({}, oldState), {}, {\n          flat: flatDefaultOptions,\n          searching: false\n        });\n      });\n    });\n  };\n\n  var valueProps = {\n    tabIndex: '0',\n    readOnly: !canSearch,\n    onChange: canSearch ? onSearch : null,\n    disabled,\n    onMouseDown: onClick,\n    onBlur,\n    onFocus,\n    onKeyPress,\n    onKeyDown,\n    onKeyUp,\n    ref\n  };\n  var optionProps = useMemo(function () {\n    return {\n      tabIndex: '-1',\n      onMouseDown,\n      onKeyDown,\n      onKeyPress,\n      onBlur\n    };\n  }, [onMouseDown, onKeyDown, onKeyPress, onBlur]);\n  useEffect(function () {\n    setState(function (oldState) {\n      return _objectSpread(_objectSpread({}, oldState), {}, {\n        value: defaultValue\n      });\n    });\n  }, [defaultValue]);\n  useEffect(function () {\n    setState(function (oldState) {\n      return _objectSpread(_objectSpread({}, oldState), {}, {\n        flat: flatDefaultOptions\n      });\n    });\n  }, [flatDefaultOptions]);\n  useEffect(function () {\n    if (state.changed !== false) {\n      setState(function (oldState) {\n        return _objectSpread(_objectSpread({}, oldState), {}, {\n          changed: false\n        });\n      });\n      onChange.apply(void 0, _toConsumableArray(state.changed));\n    }\n  }, [state.changed, onChange]);\n  return [{\n    value: option,\n    highlighted,\n    options,\n    disabled,\n    displayValue,\n    focus,\n    search,\n    searching\n  }, valueProps, optionProps, function (newValue) {\n    return setState(function (oldState) {\n      return _objectSpread(_objectSpread({}, oldState), {}, {\n        value: newValue\n      });\n    });\n  }];\n}","map":{"version":3,"sources":["/home/hishsmtariq/ReactJsProjects/spare_part/node_modules/react-select-search/dist/esm/useSelect.js"],"names":["ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","useEffect","useMemo","useState","useRef","useCallback","highlightReducer","getDisplayValue","flattenOptions","groupOptions","getNewValue","getOption","doSearch","useSelect","defaultValue","disabled","multiple","search","canSearch","fuse","defaultOptions","options","onChange","getOptions","allowEmpty","closeOnSelect","closable","ref","flatDefaultOptions","flat","addedOptions","focus","searching","highlighted","changed","state","setState","option","newOption","displayValue","onBlur","oldState","current","blur","setFocus","newFocus","onClick","onFocus","onSelect","id","prevState","prevFlat","prevHighlighted","item","find","values","newOptions","onMouseDown","e","preventDefault","currentTarget","onKeyDown","onKeyPress","onKeyUp","onSearch","inputVal","newState","searchableOption","Promise","resolve","then","foundOptions","catch","valueProps","tabIndex","readOnly","optionProps","newValue"],"mappings":"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","sourcesContent":["function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { useEffect, useMemo, useState, useRef, useCallback } from 'react';\nimport highlightReducer from './highlightReducer';\nimport getDisplayValue from './lib/getDisplayValue';\nimport flattenOptions from './lib/flattenOptions';\nimport groupOptions from './lib/groupOptions';\nimport getNewValue from './lib/getNewValue';\nimport getOption from './lib/getOption';\nimport doSearch from './search';\nexport default function useSelect({\n  value: defaultValue = null,\n  disabled = false,\n  multiple = false,\n  search: canSearch = false,\n  fuse = false,\n  options: defaultOptions,\n  onChange = () => {},\n  getOptions = null,\n  allowEmpty = true,\n  closeOnSelect = true,\n  closable = true\n}) {\n  const ref = useRef(null);\n  const flatDefaultOptions = useMemo(() => flattenOptions(defaultOptions), [defaultOptions]);\n  const [state, setState] = useState({\n    flat: [],\n    addedOptions: [],\n    value: defaultValue,\n    search: '',\n    focus: false,\n    searching: false,\n    highlighted: -1,\n    changed: false\n  });\n  const {\n    flat,\n    addedOptions,\n    value,\n    search,\n    focus,\n    searching,\n    highlighted\n  } = state;\n  const option = useMemo(() => {\n    let newOption = getOption(value, [...flatDefaultOptions, ...addedOptions]);\n\n    if (!newOption && !allowEmpty && !multiple) {\n      [newOption] = flatDefaultOptions;\n    }\n\n    return newOption;\n  }, [value, flatDefaultOptions, addedOptions, allowEmpty, multiple]);\n  const options = useMemo(() => groupOptions(flat), [flat]);\n  const displayValue = useMemo(() => getDisplayValue(option), [option]);\n  const onBlur = useCallback(() => {\n    setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n      focus: false,\n      search: '',\n      flat: flatDefaultOptions,\n      highlighted: -1\n    }));\n\n    if (ref.current) {\n      ref.current.blur();\n    }\n  }, [flatDefaultOptions, ref]);\n\n  const setFocus = newFocus => setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n    focus: newFocus\n  }));\n\n  const onClick = () => setFocus(!focus);\n\n  const onFocus = () => setFocus(true);\n\n  const onSelect = useCallback(id => {\n    setState(prevState => {\n      const {\n        flat: prevFlat,\n        highlighted: prevHighlighted\n      } = prevState; // eslint-disable-next-line no-underscore-dangle,eqeqeq\n\n      const item = id ? prevFlat.find(i => i.value == id) : prevFlat[prevHighlighted];\n\n      if (!item) {\n        return prevState;\n      }\n\n      const values = getNewValue(item.value, prevState.value, multiple);\n      const newOptions = getOption(values, prevFlat);\n      return _objectSpread(_objectSpread({}, prevState), {}, {\n        addedOptions: multiple ? newOptions : [newOptions],\n        value: values,\n        changed: [values, newOptions]\n      });\n    });\n  }, [multiple]);\n  const onMouseDown = useCallback(e => {\n    if (!closeOnSelect) {\n      e.preventDefault();\n    }\n\n    onSelect(e.currentTarget.value);\n  }, [onSelect, closeOnSelect]);\n  const onKeyDown = useCallback(e => {\n    const {\n      key\n    } = e;\n\n    if (key === 'ArrowDown' || key === 'ArrowUp') {\n      e.preventDefault();\n      setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n        highlighted: highlightReducer(oldState.highlighted, {\n          key,\n          options: oldState.flat\n        })\n      }));\n    }\n  }, []);\n  const onKeyPress = useCallback(({\n    key\n  }) => {\n    if (key === 'Enter') {\n      onSelect();\n\n      if (closable && closeOnSelect) {\n        onBlur();\n      }\n    }\n  }, [onSelect, closeOnSelect, onBlur, closable]);\n  const onKeyUp = useCallback(({\n    key\n  }) => {\n    if (key === 'Escape') {\n      onBlur();\n    }\n  }, [onBlur]);\n\n  const onSearch = ({\n    target\n  }) => {\n    const {\n      value: inputVal\n    } = target;\n    const newState = {\n      search: inputVal\n    };\n    let searchableOption = flatDefaultOptions;\n\n    if (getOptions && inputVal.length) {\n      newState.searching = true;\n      searchableOption = getOptions(inputVal);\n    }\n\n    setState(oldState => _objectSpread(_objectSpread({}, oldState), newState));\n    Promise.resolve(searchableOption).then(foundOptions => {\n      let newOptions = foundOptions;\n\n      if (inputVal.length) {\n        newOptions = doSearch(inputVal, foundOptions, fuse);\n      }\n\n      setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n        flat: newOptions === false ? foundOptions : newOptions,\n        searching: false\n      }));\n    }).catch(() => setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n      flat: flatDefaultOptions,\n      searching: false\n    })));\n  };\n\n  const valueProps = {\n    tabIndex: '0',\n    readOnly: !canSearch,\n    onChange: canSearch ? onSearch : null,\n    disabled,\n    onMouseDown: onClick,\n    onBlur,\n    onFocus,\n    onKeyPress,\n    onKeyDown,\n    onKeyUp,\n    ref\n  };\n  const optionProps = useMemo(() => ({\n    tabIndex: '-1',\n    onMouseDown,\n    onKeyDown,\n    onKeyPress,\n    onBlur\n  }), [onMouseDown, onKeyDown, onKeyPress, onBlur]);\n  useEffect(() => {\n    setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n      value: defaultValue\n    }));\n  }, [defaultValue]);\n  useEffect(() => {\n    setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n      flat: flatDefaultOptions\n    }));\n  }, [flatDefaultOptions]);\n  useEffect(() => {\n    if (state.changed !== false) {\n      setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n        changed: false\n      }));\n      onChange(...state.changed);\n    }\n  }, [state.changed, onChange]);\n  return [{\n    value: option,\n    highlighted,\n    options,\n    disabled,\n    displayValue,\n    focus,\n    search,\n    searching\n  }, valueProps, optionProps, newValue => setState(oldState => _objectSpread(_objectSpread({}, oldState), {}, {\n    value: newValue\n  }))];\n}"]},"metadata":{},"sourceType":"module"}