{"ast":null,"code":"import _classCallCheck from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{MDBBtn,MDBCard,MDBCardBody,MDBCol,MDBContainer,MDBInput,MDBRow}from\"mdbreact\";var axios=require(\"axios\");var LoginPage=/*#__PURE__*/function(_Component){_inherits(LoginPage,_Component);var _super=_createSuper(LoginPage);function LoginPage(){var _this;_classCallCheck(this,LoginPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:\"\",password:\"\",login:false};_this.componentWillMount=function(){axios.post(\"http://localhost/spare_parts/session_checker.php\").then(function(value){if(value.data===\"no record found\")return null;else if(value.data[0].status==='1'){_this.props.history.push(\"/\");}});};_this.onLogin=function(val){var _this$state=_this.state,email=_this$state.email,password=_this$state.password;axios.post(\"http://localhost/spare_parts/signin.php\",JSON.stringify({email:email})).then(function(response){var status=response.data[0].pwd===password;// this.setState({email: \"\", password: \"\"});\nif(status){axios.post(\"http://localhost/spare_parts/session_create.php\",{email:email}).then(function(value){return _this.setState({login:true});});}});};return _this;}_createClass(LoginPage,[{key:\"render\",value:function render(){var _this2=this;if(this.state.login)this.props.history.push(\"/\");var _this$state2=this.state,email=_this$state2.email,password=_this$state2.password;return/*#__PURE__*/React.createElement(MDBContainer,null,/*#__PURE__*/React.createElement(MDBRow,null,/*#__PURE__*/React.createElement(MDBCol,{md:\"6\"},/*#__PURE__*/React.createElement(MDBCard,null,/*#__PURE__*/React.createElement(\"div\",{className:\"header pt-3 grey lighten-2\"},/*#__PURE__*/React.createElement(MDBRow,{className:\"d-flex justify-content-start\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"deep-grey-text mt-3 mb-4 pb-1 mx-5\"},\"Log in\"))),/*#__PURE__*/React.createElement(MDBCardBody,{className:\"mx-4 mt-4\"},/*#__PURE__*/React.createElement(MDBInput,{label:\"Your email\",value:email,group:true,type:\"text\",validate:true,onChange:function onChange(event){return _this2.setState({email:event.target.value});}}),/*#__PURE__*/React.createElement(MDBInput,{label:\"Your password\",value:password,group:true,type:\"password\",validate:true,containerClass:\"mb-0\",onChange:function onChange(event){return _this2.setState({password:event.target.value});}}),/*#__PURE__*/React.createElement(\"p\",{className:\"font-small grey-text d-flex justify-content-end\"},\"Forgot\",/*#__PURE__*/React.createElement(\"a\",{href:\"#\",className:\"dark-grey-text font-weight-bold ml-1\"},\"Password?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center mb-4 mt-5\"},/*#__PURE__*/React.createElement(MDBBtn,{color:\"danger\",type:\"button\",className:\"btn-block z-depth-2\",onClick:function onClick(){return _this2.onLogin(true);}},\"Log in\")),/*#__PURE__*/React.createElement(\"p\",{className:\"font-small grey-text d-flex justify-content-center\"},\"Don't have an account?\",/*#__PURE__*/React.createElement(\"a\",{href:\"#\",className:\"dark-grey-text font-weight-bold ml-1\"},\"Sign up\")))))));}}]);return LoginPage;}(Component);export default LoginPage;","map":{"version":3,"sources":["/home/hishsmtariq/GitProj/spare_part/src/spare_parts_components/pages/login.jsx"],"names":["React","Component","MDBBtn","MDBCard","MDBCardBody","MDBCol","MDBContainer","MDBInput","MDBRow","axios","require","LoginPage","state","email","password","login","componentWillMount","post","then","value","data","status","props","history","push","onLogin","val","JSON","stringify","response","pwd","setState","event","target"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\n\nimport {MDBBtn, MDBCard, MDBCardBody, MDBCol, MDBContainer, MDBInput, MDBRow,} from \"mdbreact\";\n\nconst axios = require(\"axios\");\n\nclass LoginPage extends Component {\n    state = {\n        email: \"\",\n        password: \"\",\n        login: false,\n    };\n\n\n    componentWillMount = () => {\n        axios.post(\"http://localhost/spare_parts/session_checker.php\")\n            .then(value => {\n                if (value.data === \"no record found\") return null;\n                else if(value.data[0].status === '1') {\n                    this.props.history.push(\"/\");\n                }\n            })\n    }\n\n\n    onLogin = (val) => {\n        const {email, password} = this.state;\n        axios.post(\n            \"http://localhost/spare_parts/signin.php\",\n            JSON.stringify({\n                email: email,\n            })\n        ).then((response) => {\n            const status = response.data[0].pwd === password;\n            // this.setState({email: \"\", password: \"\"});\n            if (status) {\n                axios.post(\"http://localhost/spare_parts/session_create.php\", {\n                    email: email\n                }).then(value => this.setState({login: true}))\n            }\n        });\n    };\n\n    render() {\n        if(this.state.login) this.props.history.push(\"/\");\n        const {email, password} = this.state;\n        return (\n            <MDBContainer>\n                <MDBRow>\n                    <MDBCol md=\"6\">\n                        <MDBCard>\n                            <div className=\"header pt-3 grey lighten-2\">\n                                <MDBRow className=\"d-flex justify-content-start\">\n                                    <h3 className=\"deep-grey-text mt-3 mb-4 pb-1 mx-5\">Log in</h3>\n                                </MDBRow>\n                            </div>\n                            <MDBCardBody className=\"mx-4 mt-4\">\n                                <MDBInput\n                                    label=\"Your email\"\n                                    value={email}\n                                    group\n                                    type=\"text\"\n                                    validate\n                                    onChange={(event) =>\n                                        this.setState({email: event.target.value})\n                                    }\n                                />\n                                <MDBInput\n                                    label=\"Your password\"\n                                    value={password}\n                                    group\n                                    type=\"password\"\n                                    validate\n                                    containerClass=\"mb-0\"\n                                    onChange={(event) =>\n                                        this.setState({password: event.target.value})\n                                    }\n                                />\n                                <p className=\"font-small grey-text d-flex justify-content-end\">\n                                    Forgot\n                                    <a href=\"#\" className=\"dark-grey-text font-weight-bold ml-1\">\n                                        Password?\n                                    </a>\n                                </p>\n                                <div className=\"text-center mb-4 mt-5\">\n                                    <MDBBtn\n                                        color=\"danger\"\n                                        type=\"button\"\n                                        className=\"btn-block z-depth-2\"\n                                        onClick={() => this.onLogin(true)}\n                                    >\n                                        Log in\n                                    </MDBBtn>\n                                </div>\n                                <p className=\"font-small grey-text d-flex justify-content-center\">\n                                    Don't have an account?\n                                    <a href=\"#\" className=\"dark-grey-text font-weight-bold ml-1\">\n                                        Sign up\n                                    </a>\n                                </p>\n                            </MDBCardBody>\n                        </MDBCard>\n                    </MDBCol>\n                </MDBRow>\n            </MDBContainer>\n        );\n    }\n}\n\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}