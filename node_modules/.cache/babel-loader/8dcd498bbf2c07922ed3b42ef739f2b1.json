{"ast":null,"code":"import _regeneratorRuntime from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/hishsmtariq/GitProj/spare_part/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{MDBDataTable,MDBBtn,MDBRow,MDBContainer,MDBCol}from\"mdbreact\";import\"./all_product.css\";import axios from\"axios\";var AllProducts=/*#__PURE__*/function(_Component){_inherits(AllProducts,_Component);var _super=_createSuper(AllProducts);function AllProducts(){var _this;_classCallCheck(this,AllProducts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.quantityComponent=function(index){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var rows=_this.state.data.rows;var quantity=rows.length>0?rows[index].Product_Quantity:parseInt(value);return/*#__PURE__*/React.createElement(\"div\",{className:\"md-form\",style:{margin:0}},/*#__PURE__*/React.createElement(\"input\",{// style={{width:\"150px\"}}\ntype:\"number\",id:index+1,onChange:function onChange(event){return _this.onQuantityChange(index,event.target.value);},min:0,value:quantity,className:\"form-control\"}));};_this.onQuantityChange=function(index,value){var quantity=0;if(value!==\"\")quantity=parseInt(value);var _this$state=_this.state,data=_this$state.data,grossProfit=_this$state.grossProfit;grossProfit-=data.rows[index].Profit;data.rows[index].Product_Quantity=quantity;var _data$rows$index=data.rows[index],Product_Retail_Price=_data$rows$index.Product_Retail_Price,Product_PurchasePrice=_data$rows$index.Product_PurchasePrice;data.rows[index].Profit=(Product_Retail_Price-Product_PurchasePrice)*quantity;grossProfit+=data.rows[index].Profit;_this.setState({data,grossProfit});};_this.state={data:{columns:[{label:\"Name\",field:\"Product_Name\",sort:\"asc\",width:150},{label:\"C.Name\",field:\"Category_Name\",sort:\"asc\",width:270},{label:\"P.Brand\",field:\"Product_Brand\",sort:\"asc\",width:200},{label:\"P.Code\",field:\"Product_Code\",sort:\"asc\",width:100},{label:\"Qty\",field:\"qty\",sort:\"asc\",width:150},{label:\"R.Price\",field:\"Product_Retail_Price\",sort:\"asc\",width:350},{label:\"Profit\",field:\"Profit\",sort:\"asc\",width:350}],rows:[]},grossProfit:0};_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state2,data,grossProfit,rows;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state2=_this.state,data=_this$state2.data,grossProfit=_this$state2.grossProfit;rows=data.rows;_context.next=4;return axios.post(\"http://localhost/spare_parts/allproducts.php\").then(function(response){response.data.map(function(product,index){var Product_Retail_Price=product.Product_Retail_Price,Product_PurchasePrice=product.Product_PurchasePrice,Product_Quantity=product.Product_Quantity;product[\"qty\"]=_this.quantityComponent(index,product.Product_Quantity);product[\"Profit\"]=(Product_Retail_Price-Product_PurchasePrice)*Product_Quantity;grossProfit+=product[\"Profit\"];rows=[].concat(_toConsumableArray(rows),[product]);return null;});});case 4:data.rows=rows;_this.setState({data,grossProfit});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.onSave=function(){var products=_this.state.data.rows.map(function(value){delete value.qty;return value;});var data={items:products};console.log(data);axios.post(\"http://localhost/spare_parts/update_product.php\",data).then(function(value){return console.log(value);});};return _this;}_createClass(AllProducts,[{key:\"render\",value:function render(){var _this2=this;var grossProfit=this.state.grossProfit;var _this$state$data=this.state.data,columns=_this$state$data.columns,rows=_this$state$data.rows;if(rows.length>0)rows.map(function(value,index){rows[index].qty=_this2.quantityComponent(index);// rows[index].Product_PurchasePrice;\n// rows[index].Product_Retail_Price;\nreturn null;});return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(MDBDataTable// className=\"form-header blue-gradient rounded\"\n,{theadColor:\"blue-gradient\",striped:true,barReverse:true,theadTextWhite:true,hover:true,noBottomColumns:true,data:{columns,rows}}),/*#__PURE__*/React.createElement(MDBContainer,{style:{paddingTop:50}},/*#__PURE__*/React.createElement(MDBRow,{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(MDBCol,{sm:8},/*#__PURE__*/React.createElement(MDBBtn,{color:\"success\",onClick:this.onSave},\"Save\")),/*#__PURE__*/React.createElement(MDBCol,{sm:4},/*#__PURE__*/React.createElement(\"span\",{style:{fontSize:\"20px\",fontWeight:\"bold\"}},\"Gross Profit:\",\" \"),/*#__PURE__*/React.createElement(\"div\",{style:{display:\"inline-block\"}},/*#__PURE__*/React.createElement(\"h4\",{style:{color:\"#00C851\"}},\"Rs.\".concat(grossProfit)))))));}}]);return AllProducts;}(Component);export default AllProducts;","map":{"version":3,"sources":["/home/hishsmtariq/GitProj/spare_part/src/spare_parts_components/all_product.jsx"],"names":["React","Component","MDBDataTable","MDBBtn","MDBRow","MDBContainer","MDBCol","axios","AllProducts","quantityComponent","index","value","rows","state","data","quantity","length","Product_Quantity","parseInt","margin","event","onQuantityChange","target","grossProfit","Profit","Product_Retail_Price","Product_PurchasePrice","setState","columns","label","field","sort","width","componentDidMount","post","then","response","map","product","onSave","products","qty","items","console","log","paddingTop","fontSize","fontWeight","display","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { MDBDataTable, MDBBtn, MDBRow, MDBContainer, MDBCol } from \"mdbreact\";\nimport \"./all_product.css\";\nimport axios from \"axios\";\n\nclass AllProducts extends Component {\n  quantityComponent = (index, value = null) => {\n    const { rows } = this.state.data;\n    const quantity =\n      rows.length > 0 ? rows[index].Product_Quantity : parseInt(value);\n    return (\n      <div className=\"md-form\" style={{ margin: 0 }}>\n        <input\n          // style={{width:\"150px\"}}\n          type=\"number\"\n          id={index + 1}\n          onChange={(event) => this.onQuantityChange(index, event.target.value)}\n          min={0}\n          value={quantity}\n          className=\"form-control\"\n        />\n      </div>\n    );\n  };\n\n  onQuantityChange = (index, value) => {\n    let quantity = 0;\n    if (value !== \"\") quantity = parseInt(value);\n    let { data, grossProfit } = this.state;\n    grossProfit -= data.rows[index].Profit;\n    data.rows[index].Product_Quantity = quantity;\n    const { Product_Retail_Price, Product_PurchasePrice } = data.rows[index];\n    data.rows[index].Profit =\n      (Product_Retail_Price - Product_PurchasePrice) * quantity;\n    grossProfit += data.rows[index].Profit;\n    this.setState({ data, grossProfit });\n  };\n\n  state = {\n    data: {\n      columns: [\n        {\n          label: \"Name\",\n          field: \"Product_Name\",\n          sort: \"asc\",\n          width: 150,\n        },\n        {\n          label: \"C.Name\",\n          field: \"Category_Name\",\n          sort: \"asc\",\n          width: 270,\n        },\n        {\n          label: \"P.Brand\",\n          field: \"Product_Brand\",\n          sort: \"asc\",\n          width: 200,\n        },\n        {\n          label: \"P.Code\",\n          field: \"Product_Code\",\n          sort: \"asc\",\n          width: 100,\n        },\n        {\n          label: \"Qty\",\n          field: \"qty\",\n          sort: \"asc\",\n          width: 150,\n        },\n        {\n          label: \"R.Price\",\n          field: \"Product_Retail_Price\",\n          sort: \"asc\",\n          width: 350,\n        },\n        {\n          label: \"Profit\",\n          field: \"Profit\",\n          sort: \"asc\",\n          width: 350,\n        },\n      ],\n      rows: [],\n    },\n    grossProfit: 0,\n  };\n\n  componentDidMount = async () => {\n    let { data, grossProfit } = this.state;\n    let rows = data.rows;\n    await axios\n      .post(\"http://localhost/spare_parts/allproducts.php\")\n      .then((response) => {\n        response.data.map((product, index) => {\n          const {\n            Product_Retail_Price,\n            Product_PurchasePrice,\n            Product_Quantity,\n          } = product;\n          product[\"qty\"] = this.quantityComponent(\n            index,\n            product.Product_Quantity\n          );\n          product[\"Profit\"] =\n            (Product_Retail_Price - Product_PurchasePrice) * Product_Quantity;\n          grossProfit += product[\"Profit\"];\n          rows = [...rows, product];\n          return null;\n        });\n      });\n    data.rows = rows;\n    this.setState({ data, grossProfit });\n  };\n\n  onSave = () => {\n    const products = this.state.data.rows.map((value) => {\n      delete value.qty;\n      return value;\n    });\n\n    const data = {\n      items: products,\n    };\n\n    console.log(data);\n    axios\n      .post(\"http://localhost/spare_parts/update_product.php\", data)\n      .then((value) => console.log(value));\n  };\n\n  render() {\n    const { grossProfit } = this.state;\n    let { columns, rows } = this.state.data;\n    if (rows.length > 0)\n      rows.map((value, index) => {\n        rows[index].qty = this.quantityComponent(index);\n        // rows[index].Product_PurchasePrice;\n        // rows[index].Product_Retail_Price;\n        return null;\n      });\n    return (\n      <div>\n        <MDBDataTable\n          // className=\"form-header blue-gradient rounded\"\n          theadColor={\"blue-gradient\"}\n          striped\n          barReverse={true}\n          theadTextWhite={true}\n          hover\n          noBottomColumns={true}\n          data={{ columns, rows }}\n        />\n        <MDBContainer style={{ paddingTop: 50 }}>\n          <MDBRow className=\"d-flex justify-content-center\">\n            <MDBCol sm={8}>\n              <MDBBtn color={\"success\"} onClick={this.onSave}>\n                Save\n              </MDBBtn>\n            </MDBCol>\n            <MDBCol sm={4}>\n              <span style={{ fontSize: \"20px\", fontWeight: \"bold\" }}>\n                Gross Profit:{\" \"}\n              </span>\n              <div style={{ display: \"inline-block\" }}>\n                <h4 style={{ color: \"#00C851\" }}>{`Rs.${grossProfit}`}</h4>\n              </div>\n            </MDBCol>\n          </MDBRow>\n        </MDBContainer>\n      </div>\n    );\n  }\n}\n\nexport default AllProducts;\n"]},"metadata":{},"sourceType":"module"}